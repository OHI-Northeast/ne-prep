---
title: "species_pollution"
author: "Juliette Verstaen"
date: "8/23/2019"
output: html_document
---

``` {r setup,  message = FALSE, warning = FALSE}
knitr::opts_chunk$set(fig.width = 6, fig.height = 4, fig.path = 'figs/',
                      message = FALSE, warning = FALSE)

source('~/github/ne-prep/src/R/common.R')  ### an OHINE specific version of common.R
dir_git <- '~/github/ne-prep'
dir_anx <- file.path(dir_M, 'git-annex/neprep')

```



To be filled out!!!

Trying to open a .mdb file
```{r}
library(Hmisc)

d <- mdb.get(file.path(dir_anx, "_raw_data/TNC/TNC_MarineInvasionsDb_18feb08.mdb")) 
nas_raw <- read_csv(file.path(dir_anx, "_raw_data/NAS/NAS-Data-Download.csv")) 

scores <- d[["A_Threat_scores-Marine"]]
species <- d[["_A_SPECIES_MARINE"]]
ecoregions <- d[[30]]
occurances <- d[[3]]
pathways <- d[[4]]


scores_species <- left_join(scores, species, by = c("Species.ID")) %>% 
  select(SPECIES.NAME, Common.name, Ecol.Imp.Score, Scope.Score, Inv.Potl.Score, Mgt.Diff.Score)%>% 
  rename('Scientific Name' = 'SPECIES.NAME') 

nas <- nas_raw %>% 
  select('Scientific Name', 'Country', 'State', 'County', 'Year', 'Status') %>% 
  filter(Country %in% 'United States of America') %>% 
  mutate(database = "nas")

invasive <- left_join(nas, scores_species, by = c('Scientific Name')) %>% 
  filter(Year <= 2017 & Year >= 2005,
         State %in% c('ME', 'NH', 'MA', 'RI', 'CT', 'NY'),
         !is.na(Common.name)) %>% 
  unique()



```


